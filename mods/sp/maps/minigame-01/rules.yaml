World:
	ScriptLobbyDropdown@difficulty: 
		ID: difficulty
		Label: dropdown-difficulty.label
		Description: dropdown-difficulty.description
		Values:
			easy: options-difficulty.easy
			normal: options-difficulty.normal
			hard: options-difficulty.hard
		Default: easy
	LobbySystemActorConditionCheckbox@FREEMINIMAP:
		Enabled: false
	MissionData:
		Briefing: Control an Ion Turret to lay the brigands waste and try to survive. Protects our MCVs if possible! Destroy tunnels first!\n\n Game Duration: 5 minutes\n\nTips: Change "Setting" ->"Input" -> "Control Scheme" to "Modern" for better control

Player:
	Shroud:
		FogCheckboxEnabled:  false
		ExploredMapCheckboxEnabled: true
	## AI
	SquadManagerBotModule@AIBase:
		RequiresCondition: easy-game || normal-game || hard-game
		AssignRolesTicks: 19 ## This map is small and unit is limited
		ProtectionTypes: mutambushvent, e3, deathclaw, lynx, permacrab, jfish, visc_lrg, mutfiend, berserker, corruptor, tripod, bug, shark
		SquadSize: 5
		SquadSizeRandomBonus: 0
		MinimumAttackForceDelay: 53
	SharedCargoBotModule:
		ScanTick: 217
		Passengers: e3, deathclaw, lynx
	-LoadCargoBotModule:
	-CncEngineerBotModule:
	-SendUnitToAttackBotModule:
	-BaseBuilderBotModule@AIBase:
	-McvManagerASBotModule@AINormal:
	## Game logic
	ExternalCondition@PreventTooManyTunnel:
		Condition: tunnel
	ExternalCondition@EasyGame:
		Condition: easy-game
	ProvidesPrerequisite@EasyGame:
		Prerequisite: EasyGame
		RequiresCondition: easy-game && tunnel < 3
	ExternalCondition@NormalGame:
		Condition: normal-game
	ProvidesPrerequisite@NormalGame:
		Prerequisite: NormalGame
		RequiresCondition: normal-game && tunnel < 4
	ExternalCondition@HardGame:
		Condition: hard-game
	ProvidesPrerequisite@HardGame:
		Prerequisite: HardGame
		RequiresCondition: hard-game && tunnel < 5

HVRTRUK3:
	AutoTarget:
		InitialStanceAI: HoldFire

MUTAMBUSH:
	GrantConditionOnPrerequisite@HardGame:
		Condition: hard-game
		Prerequisites: HardGame
	GrantConditionOnPrerequisite@NormalGame:
		Condition: normal-game
		Prerequisites: NormalGame
	GrantConditionOnPrerequisite@EasyGame:
		Condition: easy-game
		Prerequisites: EasyGame
	KillsSelf@EasyGame:
		Delay: 450, 1200
		RequiresCondition: easy-game
	KillsSelf@NormalGame:
		Delay: 350, 800
		RequiresCondition: normal-game || hard-game

MUTAMBUSHVENT:
	GrantExternalConditionToOwner@PreventTooManyTunnel:
		Condition: tunnel
	AutoTarget@AIonly:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments
	SpawnActorOnDeath:
		Actor: mutambush
	## Production
	Production:
		Produces: mutvent
	GrantRandomCondition:
		Conditions: squad1, squad2, squad3
	PeriodicProducer@1:
		Actors: lynx
		Type: mutvent
		ChargeDuration: 10
		RequiresCondition: !Building-Buildup && squad1
	PeriodicProducer@2:
		Actors: e3
		Type: mutvent
		ChargeDuration: 10
		RequiresCondition: !Building-Buildup && squad2
	PeriodicProducer@3:
		Actors: deathclaw
		Type: mutvent
		ChargeDuration: 34
		RequiresCondition: !Building-Buildup && squad3
	Exit@1:
		SpawnOffset: 256,256,0
		ExitCell: 2,1
		ExitDelay: 0

GAIONTUR:
	-RepairableBuilding:
	-WithBuildingRepairDecoration:
	Health:
		HP: 400000
	TooltipDescription:
		Description: Select this defence and fire manually!
	## HACK: Makes the turret fire once per click
	AttackTurreted: 
		PersistentTargeting: false
		RequiresCondition: !Reloading 
	Armament:
		ReloadingCondition: Reloading
	-RenderRangeCircle:
	-Power:

KODK:
	Inherits@Unkillable: ^Unkillable
	ExternalCondition@active-bacon:
		Condition: can-active
	ProvidesPrerequisite@active-bacon:
		Prerequisite: ActiveBeacon
		RequiresCondition: can-active

ORBIT.DUMMY:
	Inherits: ^GROUNDDUMMY
	SpawnSparks:
		SparkWeapon: OrbitBeaconExp
		Amount: 1
		Interval: 50
		RequiresCondition: active
	GrantConditionOnPrerequisite:
		Condition: active
		Prerequisites: ActiveBeacon
	Armament@AimKODK:
		Weapon: BeaconConnectionLine
	AttackOmni@AimKODK:

## Hard mode: random encounter
## Cabal's protester
^ProtesterBase:
	WithIdleOverlay@talk:
		Image: talkbubl
		Sequence: idle2
		IsDecoration: true
		Palette: player
	Tooltip:
		Name: Protester

CIV1:
	Inherits@Protester: ^ProtesterBase
	-AttackWander:

CIV2:
	Inherits@Protester: ^ProtesterBase
	-AttackWander:

QDRONE: ## Hacker drone hack quicker than before
	GatlingReloadDelayMultiplier:
		HeatUpChange: -2
	GrantConditionOnAttack@charge:
		RequiredShotsPerInstance: 8

## Mr. Hole
VEINHOLE:
	ExternalCondition@talking:
		Condition: talking
	WithIdleAnimation@talking:
		Sequences: active1
		Interval: 11
		RequiresCondition: talking
	ExternalCondition@MrHole:
		Condition: MrHole
	AttackOmni:
		Armaments: primary, secondary
	Armament@Eggs:
		Name: secondary
		Weapon: HugeVeinholeEgg
		LocalOffset: 0, 0, 1200
		RequiresCondition: MrHole
	ForceFireAtLocation@VeinHoleReturnFire:
		RequiresCondition: !veinhole-calm || (MrHole && !talking)
	DamageMultiplier@Unkillable:
		RequiresCondition: !veinhole-calm || MrHole
	WithIdleAnimation:
		RequiresCondition: veinhole-calm && !MrHole

GEYE:
	AttackPopupTurreted:
		CloseDelay: 125
		DefaultFacing: 512
	Turreted:
		TurnSpeed: 64
		InitialFacing: 512
		RealignDelay: 10
	ExternalCondition@talking:
		Condition: talking
	ForceFireAtLocation@LookAtPlayer:
		LocalOffset: 0, 1024, 0
		RequiresCondition: talking

EGGS:
	Tooltip:
		Name: Everything Eggs
	GrantRandomCondition@tiberium:
		Conditions: visc, jfish, crab, zombie, fiend
	TransformOnCondition@crab1:
		RequiresCondition: SpawnCrabs && crab
		IntoActor: permacrab
	TransformOnCondition@jfish:
		RequiresCondition: SpawnCrabs && jfish
		IntoActor: jfish
		ForceHealthPercentage: 100
	TransformOnCondition@visc:
		RequiresCondition: SpawnCrabs && visc
		IntoActor: visc_lrg
		ForceHealthPercentage: 100
	TransformOnCondition@zombie:
		RequiresCondition: SpawnCrabs && zombie
		IntoActor: berserker
		ForceHealthPercentage: 100
	TransformOnCondition@fiend:
		RequiresCondition: SpawnCrabs && fiend
		IntoActor: mutfiend
		ForceHealthPercentage: 100

## Scrin invaders
BUG:
	Inherits@VanguardShield: ^DisplayVanguardShield

SHARK:
	Inherits@VanguardShield: ^DisplayVanguardShield

SCRPROTAL.DUMMY:
	Inherits: ^GROUNDDUMMY
	GrantExternalConditionToOwner@PreventTooManyTunnel:
		Condition: tunnel
		RequiresCondition: teleporting
	GrantConditionOnPrerequisite@HardGame:
		Condition: hard-game
		Prerequisites: HardGame
	GrantPeriodicCondition@BeginSpawn:
		Condition: allow-teleport
		CooldownDuration: 1, 100
		ActiveDuration: 200
		RequiresCondition: hard-game
	GrantPeriodicCondition@SwitchUnits:
		Condition: spawn-infantry
		CooldownDuration: 1, 100
		ActiveDuration: 1, 100
	Armament@1:
		Weapon: TeleportScrinTroop1
		ReloadingCondition: teleporting
		PauseOnCondition: !spawn-infantry || teleporting
	Armament@2:
		Weapon: TeleportScrinTroop2
		ReloadingCondition: teleporting
		PauseOnCondition: spawn-infantry || teleporting
	AttackOmni:
	ForceFireAtLocation:
		RequiresCondition: allow-teleport

