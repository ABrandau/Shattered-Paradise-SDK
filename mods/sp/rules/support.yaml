GAVULC:
	Inherits: ^TurretedDefence
	Inherits@APAMMO: ^AffectedByAPAmmunition
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	WithMakeAnimation:
		BodyNames: make
	WithSpriteBody:
		Name: make
		Sequence: invisible
	WithWallSpriteBody:
		RequiresCondition: !Building-Buildup
		Type: wall
	Valued:
		Cost: 600
	Tooltip:
		Name: Vulcan Tower
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 16
		Prerequisites: ~gacnst, gapile, ~techlevel.1
		Description: Anti-infantry base defense.\n\nGood vs: Infantry.\n\nSpecial:\n- Provides stealth detection\n- Requires power to operate
		BuildDuration: 250
		BuildDurationModifier: 100
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	Health:
		HP: 60000
	AttackTurreted:
		Armaments: primary, decoration
	AutoTarget:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments
	Armament@1:
		Weapon: VulcanTower
		LocalOffset: 588,120,1358, 588,-120,1358
		MuzzleSequence: muzzle
		PauseOnCondition: Building-Buildup
		RequiresCondition: !apammo
	Armament@1AP:
		Weapon: VulcanTowerAP
		LocalOffset: 588,120,1358, 588,-120,1358
		MuzzleSequence: muzzle
		PauseOnCondition: Building-Buildup
		RequiresCondition: apammo
	GrantConditionOnAttack:
		Condition: Attacking
		RevokeDelay: 2
		ArmamentNames: primary
		RevokeOnNewTarget: true
	Armament@3:
		Name: decoration
		Weapon: VulcanTowerLine
		LocalOffset: 988,-120,1358, 988,120,1358
		CasingWeapon: CasingDebris
		CasingSpawnLocalOffset: 800,-120,1358, 800,120,1358
		CasingTargetOffset: 600,-768,1358, 600,768,1358
		PauseOnCondition: Building-Buildup || !Attacking
		RequiresCondition: !apammo
	Armament@4AP:
		Name: decoration
		Weapon: VulcanTowerLineAP
		LocalOffset: 988,-120,1358, 988,120,1358
		CasingWeapon: CasingDebris
		CasingSpawnLocalOffset: 800,-120,1358, 800,120,1358
		CasingTargetOffset: 600,-768,1358, 600,768,1358
		PauseOnCondition: Building-Buildup || !Attacking
		RequiresCondition: apammo
	WithMuzzleOverlay:
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights-bright
		Palette: bright
	WithMakeOverlay@MAKE-BRIGHT:
		Sequence: make-bright
		Palette: bright
	LineBuildNode:
		Types: turret
	#ProvidesPrerequisite@buildingname:
	Replacement:
		ReplaceableTypes: Tower
	ActorStatValues:
		Damage: 40

GAROCK:
	Inherits: ^TurretedDefence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@AUTOTARGETPRIORITY: ^AntiVehiclePriority
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@TIER: ^Tier2
	WithMakeAnimation:
		BodyNames: make
	WithSpriteBody:
		Name: make
		Sequence: invisible
	WithWallSpriteBody:
		RequiresCondition: !Building-Buildup
		Type: wall
	Valued:
		Cost: 600
	Tooltip:
		Name: RPG Tower
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 17
		Prerequisites: ~gacnst, gaweap, ~techlevel.2
		Description: Anti-Armor base defense.\n\nGood vs: Vehicles, Structures.\n\nSpecial:\n- Provides stealth detection\n- Requires power to operate
		BuildDuration: 250
		BuildDurationModifier: 100
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	Health:
		HP: 60000
	Armament@ROCKET:
		Weapon: RPGTower
		LocalOffset: 325,-128,1900, 425,-128,1700
		PauseOnCondition: Building-Buildup
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights-bright
		Palette: bright
	WithMakeOverlay@MAKE-BRIGHT:
		Sequence: make-bright
		Palette: bright
	LineBuildNode:
		Types: turret
	#ProvidesPrerequisite@buildingname:
	Replacement:
		ReplaceableTypes: Tower
	ActorStatValues:
		Damage: 100
	AutoTarget:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments

GACSAM:
	Inherits: ^TurretedDefence
	Inherits@AA: ^AntiAir
	WithMakeAnimation:
		BodyNames: make
	WithSpriteBody:
		Name: make
		Sequence: invisible
	WithWallSpriteBody:
		RequiresCondition: !Building-Buildup
		Type: wall
	Tooltip:
		Name: SAM Tower
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 18
		Prerequisites: ~gacnst, garadr, ~techlevel.4
		Description: Anti-Air base defense.\n\nGood vs: Aircraft\n\nSpecial\n- Can attack Air\n- Requires power to operate
		BuildDuration: 375
		BuildDurationModifier: 100
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	BodyOrientation:
		QuantizedFacings: 32
	Armament:
		Weapon: GdiRedEye
		LocalOffset: 400,0,1800
		PauseOnCondition: Building-Buildup
	AutoTarget:
		ScanRadius: 12 #PREF: save trait looks up and scan armaments
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights-bright
		Palette: bright
	WithMakeOverlay@MAKE-BRIGHT:
		Sequence: make-bright
		Palette: bright
	LineBuildNode:
		Types: turret
	#ProvidesPrerequisite@buildingname:
	RenderSprites:
	RequiresBuildableArea:
		AreaTypes: building
	Replacement:
		ReplaceableTypes: Tower
	ActorStatValues:
		Damage: 50

GASONC:
	Inherits: ^TurretedDefence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	WithMakeAnimation:
		BodyNames: make
	WithSpriteBody:
		Name: make
		Sequence: invisible
	WithWallSpriteBody:
		RequiresCondition: !Building-Buildup
		Type: wall
	Valued:
		Cost: 1000
	Tooltip:
		Name: Sonic Emitter
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 42
		Prerequisites: ~gacnst, gatech, upgrade.sonic_emitter_protocol, ~global-upgrades, ~techlevel.5
		Description: High-tech base defense with a powerful harmonic resonance cannon.\n\nGood vs: Ground targets\n\nSpecial:\n- Deals heavy damage over time to enemy units in the line of fire\n- Requires power to operate
		BuildDuration: 500
		BuildDurationModifier: 100
	GrantConditionOnPowerState@LOWPOWER:
		Condition: lowpower
		ValidPowerStates: Low, Critical
	BodyOrientation:
		QuantizedFacings: 32
	Health:
		HP: 60000
	Armament@charge:
		Name: charge
		Weapon: SonicCharge
		LocalOffset: 0,0,1500
		PauseOnCondition: Building-Buildup || cooldown
	GrantConditionOnAttack@charge:
		Condition: charged
		RequiredShotsPerInstance: 4
		ArmamentNames: charge
	Armament@wave:
		Weapon: SonicEmitterProjGDI
		LocalOffset: 512,0,1400
		PauseOnCondition: Building-Buildup || !charged
		ReloadingCondition: cooldown
		MuzzleSequence: muzzle
		MuzzlePalette: gensmkexplocyan70
	AttackTurreted:
		Armaments: charge, primary
	AutoTarget:
		ScanRadius: 8 #PREF: save trait looks up and scan armaments
	WithMuzzleOverlay:
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights-bright
		Palette: bright
	WithMakeOverlay@MAKE-BRIGHT:
		Sequence: make-bright
		Palette: bright
	LineBuildNode:
		Types: turret
	RenderSprites:
	RequiresBuildableArea:
		AreaTypes: building
	Replacement:
		ReplaceableTypes: Tower
	ActorStatValues:
		Damage: 75

NALASR:
	Inherits: ^TurretedDefence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Valued:
		Cost: 800
	Tooltip:
		Name: Laser Turret
	Buildable:
		Queue: Defense.Shared, Defense.Nod
		Description: Basic laser defense.\n\nGood vs: Ground targets\n\nSpecial:\n- Provides stealth detection\n- Requires power to operate
		Prerequisites: ~nodyard, nahand, ~techlevel.1
		BuildPaletteOrder: 19
		BuildDuration: 375
		BuildDurationModifier: 100
	Building:
	Health:
		HP: 60000
	Turreted:
		InitialFacing: 1200
		Offset: 350,-165,270
	Armament:
		Weapon: TurretLaserFire
		LocalOffset: 625, 0, 575
		MuzzleSequence: muzzle
		MuzzlePalette: gensmkexplojFred
		PauseOnCondition: Building-Buildup
	AutoTarget:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments
	WithMuzzleOverlay:
	Power:
		Amount: -40
	RequiresBuildableArea:
		AreaTypes: building
	ActorStatValues:
		Damage: 50

NAOBEL:
	Inherits: ^Defence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@VISION: ^9CellVision
	Inherits@SHAPE: ^2x2Shape
	Inherits@TIER: ^Tier2
	Valued:
		Cost: 1500
	Tooltip:
		Name: Obelisk of Light
	Buildable:
		Queue: Defense.Shared, Defense.Nod
		Description: High tech laser defense.\n\nGood vs: Ground targets\n\nSpecial:\n- Provides stealth detection\n- Requires power to operate
		BuildPaletteOrder: 20
		Prerequisites: ~nodyard, natech, ~techlevel.5
		BuildDuration: 625
		BuildDurationModifier: 100
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 100000
	WithMuzzleOverlay:
	Armament:
		Weapon: ObeliskLaserFire
		LocalOffset: 1980,297,1131
		MuzzleSequence: muzzle
		MuzzlePalette: obelpal
		PauseOnCondition: Building-Buildup
	AttackCharges:
		PauseOnCondition: empdisable || disabled
		ChargeLevel: 40
		ChargingCondition: charging
	AutoTarget:
		ScanRadius: 9 #PREF: save trait looks up and scan armaments
	AmbientSound:
		RequiresCondition: charging && !disabled
		SoundFiles: obelpowr.aud
	WithChargeOverlay:
		Sequence: active
		Palette: player
		IsPlayerPalette: true
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@LIGHTS:
		Sequence: idle-lights
		RequiresCondition: !Building-Buildup
	Power:
		Amount: -110
	IsometricSelectable:
		DecorationHeight: 48
	ActorStatValues:
		Damage: 300

NASAM:
	Inherits: ^TurretedDefence
	Inherits@AA: ^AntiAir
	Inherits@TIBCORE: ^AffectedByTibCoreMissiles
	Tooltip:
		Name: SAM Site
	Buildable:
		Queue: Defense.Shared, Defense.Nod
		Description: Anti-Air base defense.\n\nGood vs: Aircraft.\n\nSpecial\n- Can attack Air\n- Requires power to operate
		Prerequisites: ~nodyard, naradr, ~techlevel.4
		BuildPaletteOrder: 21
		BuildDuration: 375
		BuildDurationModifier: 100
	Turreted:
		TurnSpeed: 40
		InitialFacing: 368
	Armament:
		Weapon: RedEye2
		LocalOffset: 400,0,1024
		RequiresCondition: !tibcore
	Armament@TIB:
		Weapon: RedEye2Tib
		LocalOffset: 400,0,1024
		RequiresCondition: tibcore
	AutoTarget:
		ScanRadius: 12 #PREF: save trait looks up and scan armaments
	ActorStatValues:
		Damage: 50

MUBUNKR:
	Inherits: ^Defence
	Inherits@AUTOTARGET: ^AutoTargetAll
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@PIPS: ^CargoPips
	Inherits@RENDER: ^MutRenderBuilding
	Inherits@SHAPE: ^2x2Shape
	Inherits@AImicroManagable: ^AImicroManagable
	Valued:
		Cost: 500
	CustomSellValue:
		Value: 400
	Tooltip:
		Name: Bunker
	Buildable:
		Queue: Defense.Shared, Defense.Mutant
		Description: Fortified position where infantry can fire from within.\n\nGood vs: Depends what has been garrisoned\n\nSpecial:\n- Provides stealth detection when garrisoned\n- Infantry garrisoned inside gain extra range\n- Comes with a free marauder
		BuildPaletteOrder: 22
		Prerequisites: ~mutyard, murax, ~techlevel.1
		BuildDuration: 250
		BuildDurationModifier: 100
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 60000
	Cargo:
		Types: Infantry
		MaxWeight: 5
		AfterLoadDelay: 0
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
		EjectOnDeath: false
		LoadedCondition: loaded
		InitialUnits: marauder
		OwnerChangedAffectsPassengers: false
	WithCargoSounds:
		EnterSound: ugarris.wav
		ExitSound: ugarris.wav
	DetectCloaked:
		RequiresCondition: loaded
	AttackGarrisoned:
		PortOffsets: 384,0,128, 224,-341,128, -224,-341,128, -384,0,128, -224,341,128, 224,341,128
		PortYaws: 0, 176, 341, 512, 682, 853
		PortCones: 88, 88, 88, 88, 88, 887
	AutoTarget:
		ScanRadius: 15 #PREF: save trait looks up and scan armaments
	WithSpriteBody:
		PauseOnCondition: loaded && !Building-Buildup
	WithIdleOverlay@1@asd:
		RequiresCondition: loaded && !Building-Buildup
		Sequence: occupied
	-WithColoredOverlay@IDISABLE:
	-GrantConditionOnPowerState@LOWPOWER:
	-GrantCondition@IDISABLE:
	-ToggleConditionOnOrder:
	-WithDecoration@POWERDOWN:
	-PowerMultiplier@POWERDOWN:
	-SpawnActorsOnSell@gdi:
	-SpawnActorsOnSell@nod:
	-SpawnActorsOnSell@cab:
	-SpawnActorsOnSell@mut:
	-SpawnActorsOnSell@scr:
	-WithColoredOverlay@EMPDISABLE:
	-TimedConditionBar@EMPDISABLE:
	-WithIdleOverlay@EMPDISABLE:
	-ExternalCondition@empdisable:
	WithCargoPipsDecoration:
		Margin: 8, 2
		FullSequence: pip-green-building
		EmptySequence: pip-empty-building
		PipStride: 4, 2
		ValidRelationships: Ally, Neutral, Enemy
		CustomPipSequences:
			red: pip-red-building
			green: pip-green-building
			yellow: pip-yellow-building
			blue: pip-blue-building
			gray: pip-gray-building
	AutoDeployer@AI:
		RequiresCondition: AImicroManage && loaded && HeavyDamaged
		DeployChance: 100
		DeployTrigger: Periodically
		DeployTicks: 10
		UndeployTicks: 10

MUCANNON:
	Inherits: ^TurretedDefence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@AUTOTARGETPRIORITY: ^AntiVehiclePriority
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@RENDER: ^MutRenderBuilding
	Inherits@TIER: ^Tier2
	Valued:
		Cost: 500
	Tooltip:
		Name: Guardian Cannon
	Buildable:
		Queue: Defense.Shared, Defense.Mutant
		Description: Anti-Armor base defense.\n\nGood vs: Vehicles\n\nSpecial:\n- Provides stealth detection
		Prerequisites: ~mutyard, muweap, ~techlevel.2
		BuildPaletteOrder: 23
		BuildDuration: 250
		BuildDurationModifier: 100
	Health:
		HP: 60000
	Turreted:
		TurnSpeed: 24
		InitialFacing: 896
	AttackTurreted:
		PauseOnCondition: empdisable
	AutoTarget:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments
	DetectCloaked:
		RequiresCondition: !empdisable
	WithMuzzleOverlay:
	Armament:
		Weapon: ForgottenCannonWeapon
		MuzzleSequence: muzzle
		LocalOffset: 1400,0,700, 1400,0,700
		CasingWeapon: ShellCasingDebris
		CasingSpawnLocalOffset: 0,0,700, 0,0,700
		CasingTargetOffset: -128, 768, 0, -128, -768, 0
		PauseOnCondition: Building-Buildup || empdisable
	-WithColoredOverlay@IDISABLE:
	-GrantConditionOnPowerState@LOWPOWER:
	-GrantCondition@IDISABLE:
	-ToggleConditionOnOrder:
	-WithDecoration@POWERDOWN:
	-PowerMultiplier@POWERDOWN:
	-Power:
	ActorStatValues:
		Damage: 70

MUFLAK:
	Inherits: ^TurretedDefence
	Inherits@AA: ^AntiAir
	Inherits@RENDER: ^MutRenderBuilding
	Tooltip:
		Name: Flak Station
	Buildable:
		Queue: Defense.Shared, Defense.Mutant
		Description: Anti-Air base defense.\n\nGood vs: Aircraft.\n\nSpecial\n- Can attack Air
		Prerequisites: ~mutyard, muradr, ~techlevel.4
		BuildPaletteOrder: 24
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 600
	Health:
		HP: 40000
	Turreted:
		InitialFacing: 368
	AttackTurreted:
		PauseOnCondition: empdisable
	AutoTarget:
		ScanRadius: 12 #PREF: save trait looks up and scan armaments
	WithMuzzleOverlay:
	Armament:
		Weapon: FlakFire
		MuzzleSequence: muzzle
		MuzzlePalette: apgrey
		LocalOffset: 450,-200, 900, 450,200,900
		CasingWeapon: ShellCasingDebris
		CasingSpawnLocalOffset: 200,-200, 700, 200,200,700
		CasingTargetOffset: 0, -768, 0, 0, 768, 0
		PauseOnCondition: Building-Buildup || empdisable
	-WithColoredOverlay@IDISABLE:
	-GrantConditionOnPowerState@LOWPOWER:
	-GrantCondition@IDISABLE:
	-ToggleConditionOnOrder:
	-WithDecoration@POWERDOWN:
	-PowerMultiplier@POWERDOWN:
	-Power:
	ActorStatValues:
		Damage: 40

CABPIT:
	Inherits: ^Defence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@RENDER: ^CabRenderBuilding
	Inherits@SHAPE: ^2x2Shape
	Valued:
		Cost: 800
	Tooltip:
		Name: Drone Pit
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		Description: Drone Hangar that launches small bomber drones.\n\nGood vs: Infantry\n\nSpecial:\n- Provides stealth detection
		BuildPaletteOrder: 25
		Prerequisites: ~cabyard, cabclaw, ~techlevel.1
		IconPalette: UnittemIconCab
		BuildDuration: 375
		BuildDurationModifier: 100
	-Capturable:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-CaptureManager:
	DetectCloaked:
		RequiresCondition: !empdisable
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 60000
	AttackOmni:
		PauseOnCondition: empdisable
	AutoTarget:
		ScanRadius: 8 #PREF: save trait looks up and scan armaments
	Armament:
		Weapon: CabPitFighterSpawn
		PauseOnCondition: Building-Buildup
	CarrierMaster:
		Actors: CABDRONEJET, CABDRONEJET, CABDRONEJET
		RespawnTicks: 150
		RearmTicks: 10
		InstantRepair: true
	-WithColoredOverlay@IDISABLE:
	-GrantConditionOnPowerState@LOWPOWER:
	-GrantCondition@IDISABLE:
	-ToggleConditionOnOrder:
	-WithDecoration@POWERDOWN:
	-PowerMultiplier@POWERDOWN:
	ActorStatValues:
		Damage: 60

CABBLAST:
	Inherits: ^TurretedDefence
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@RENDER: ^CabRenderBuilding
	Inherits@TIER: ^Tier2
	Valued:
		Cost: 1000
	Tooltip:
		Name: Blaster Turret
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		Description: Artillery defense turret.\n\nGood vs: Ground targets\n\nSpecial:\n- Provides stealth detection\n- Has minimum range of fire\n- Requires power to operate
		Prerequisites: ~cabyard, cabradr, ~techlevel.4
		BuildPaletteOrder: 26
		BuildDuration: 500
		BuildDurationModifier: 100
	Building:
	Health:
		HP: 60000
	BodyOrientation:
		QuantizedFacings: 32
	Turreted:
		InitialFacing: 368
	AutoTarget:
		ScanRadius: 11 #PREF: save trait looks up and scan armaments
	WithMuzzleOverlay:
	Armament:
		Weapon: BlasterProton
		LocalOffset: 400,256,356, 400,-256,356, 300,256,920, 300,-256,920
		MuzzlePalette: apgreen
		MuzzleSequence: muzzle
		PauseOnCondition: Building-Buildup
	Power:
		Amount: -75
	ActorStatValues:
		Damage: 300

CABRAIL:
	Inherits: ^TurretedDefence
	Inherits@AA: ^AntiAir
	Inherits@RENDER: ^CabRenderBuilding
	Tooltip:
		Name: Railgun Turret
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		Description: Anti-Air base defense.\n\nGood vs: Aircraft\n\nSpecial\n- Can attack Air\n- Requires power to operate
		Prerequisites: ~cabyard, cabradr, ~techlevel.4
		BuildPaletteOrder: 27
		BuildDuration: 375
		BuildDurationModifier: 100
	Turreted:
		InitialFacing: 368
	Armament:
		Weapon: CABRAILAA
		LocalOffset: 600,400,2000, 600,-400,2000
		PauseOnCondition: Building-Buildup
	AutoTarget:
		ScanRadius: 12 #PREF: save trait looks up and scan armaments
	ActorStatValues:
		Damage: 50

SCRNEEDLER:
	Inherits: ^TurretedDefence
	Inherits@1: ^ScrinDeathExplo
	Inherits@2: ^ScrinDefenceFire
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@RENDER: ^ScrinRenderBuilding
	Inherits@VINIFERA: ^AffectedByViniferaCatalysts
	Valued:
		Cost: 800
	Tooltip:
		Name: Ichor Waste Turret
	Buildable:
		Queue: Defense.Shared, Defense.Scrin
		Description: Base defense that atacks with tiberium based chemicals.\n\nGood vs Ground targets\n\nSpecial:\n- Requires power to operate\n- Can mutate killed enemies\n- Attacks emit radiation that harm units in the area
		Prerequisites: ~drached, scrrax, ~techlevel.1
		BuildPaletteOrder: 28
		BuildDuration: 375
		BuildDurationModifier: 100
	Health:
		HP: 80000
	Turreted:
		InitialFacing: 368
	AutoTarget:
		ScanRadius: 7 #PREF: save trait looks up and scan armaments
	Armament@1:
		Weapon: WasteTurretWeapon
		LocalOffset: 1000,-100,500, 1000,100,500
		MuzzlePalette: gradientgreen60
		MuzzleSequence: muzzle
		PauseOnCondition: Building-Buildup
		RequiresCondition: !vinifera_catalysts
	Armament@2:
		Weapon: WasteTurretWeaponBlue
		LocalOffset: 1000,-100,500, 1000,100,500
		MuzzlePalette: gradientblue60
		MuzzleSequence: muzzle
		PauseOnCondition: Building-Buildup
		RequiresCondition: vinifera_catalysts
	WithMuzzleOverlay:
	ThrowsShrapnel@SMALL:
		Weapons: SmallDebrisScrin
	ThrowsShrapnel@LARGE:
		Weapons: LargeDebrisScrin
	ActorStatValues:
		Damage: 40

SCRDRONE:
	Inherits: ^Defence
	Inherits@1: ^ScrinDeathExplo
	Inherits@2: ^ScrinDefenceFire
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@DETECTION: ^TowerStealthDetection
	Inherits@RENDER: ^ScrinRenderBuilding
	Inherits@TIER: ^Tier2
	Inherits@SHAPE: ^2x2Shape
	Valued:
		Cost: 1500
	Tooltip:
		Name: Pulsar Tower
	Buildable:
		Queue: Defense.Shared, Defense.Scrin
		BuildPaletteOrder: 45
		Description: Advanced base defense.\n\nGood vs Ground targets\n\nSpecial:\n- Impulse deals damage over time and slows enemy units\n- Requires power to operate
		Prerequisites: ~drached, scrtech, ~techlevel.5
		BuildDuration: 625
		BuildDurationModifier: 100
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Health:
		HP: 100000
	AttackOmni:
		PauseOnCondition: empdisable || disabled
	AutoTarget:
		ScanRadius: 8 #PREF: save trait looks up and scan armaments
	Armament:
		Weapon: SrcinOrb
		LocalOffset: 0, 0, 3000
		ReloadingCondition: charging
		PauseOnCondition: Building-Buildup
	Power:
		Amount: -50
	WithIdleOverlay@Charged2:
		Image: pulsar
		Sequence: sorb
		Offset: 0, 0, 3000
		RequiresCondition: !Building-Buildup && !charging && !empdisable && !disabled
		Palette: gensmkexplopurple
		IsDecoration: true ## so this doesn't affect by cloak palette
	WithIdleOverlay@Charging1:
		Image: pulsar
		Sequence: sorbpulsetiny
		Offset: 0, 0, 3000
		RequiresCondition: !Building-Buildup && charging && !empdisable && !disabled
		Palette: scrinenergystuffs
		IsDecoration: true ## so this doesn't affect by cloak palette
	WithIdleOverlay@Charging2:
		Image: pulsar
		Sequence: sorbtiny
		Offset: 0, 0, 3000
		RequiresCondition: !Building-Buildup && charging && !empdisable && !disabled
		Palette: gensmkexplopurple
		IsDecoration: true ## so this doesn't affect by cloak palette
	IsometricSelectable:
		DecorationHeight: 52
	ThrowsShrapnel@SMALL:
		Weapons: SmallDebrisScrin
	ThrowsShrapnel@LARGE:
		Weapons: LargeDebrisScrin
	ActorStatValues:
		Damage: 130

SCRTRACTOR:
	Inherits: ^TurretedDefence
	Inherits@1: ^ScrinDeathExplo
	Inherits@2: ^ScrinDefenceFire
	Inherits@AA: ^AntiAir
	Inherits@RENDER: ^ScrinRenderBuilding
	Valued:
		Cost: 800
	Tooltip:
		Name: Tractor Beam
	Buildable:
		Queue: Defense.Shared, Defense.Scrin
		Description: Anti-Air base defense.\n\nGood vs Aircraft\n\nSpecial:\n- Can attack air\n- Freezes the targetted aircraft momentarily\n- Requires power to operate
		Prerequisites: ~drached, scrradr, ~techlevel.4
		BuildPaletteOrder: 30
		BuildDuration: 375
		BuildDurationModifier: 100
	Turreted:
		InitialFacing: 368
	AutoTarget:
		ScanRadius: 12 #PREF: save trait looks up and scan armaments
	Armament@2:
		Weapon: TractorBeam
		LocalOffset: 512,600,1948
		PauseOnCondition: Building-Buildup
	Armament@3:
		Weapon: TractorBeam2
		LocalOffset: 512,-590,1948
		PauseOnCondition: Building-Buildup
	Armament@4:
		Weapon: TractorBeam2
		LocalOffset: 300,200,2400
		PauseOnCondition: Building-Buildup
	Armament@5:
		Weapon: TractorBeam2
		LocalOffset: 300,-190,2400
		PauseOnCondition: Building-Buildup
	Armament@6:
		Weapon: TractorBeam2
		LocalOffset: 512,200,1500
		PauseOnCondition: Building-Buildup
	Armament@7:
		Weapon: TractorBeam2
		LocalOffset: 512,-190,1500
		PauseOnCondition: Building-Buildup
	ThrowsShrapnel@SMALL:
		Weapons: SmallDebrisScrin
	ThrowsShrapnel@LARGE:
		Weapons: LargeDebrisScrin
	ActorStatValues:
		Damage: 40

GAPOWRUP:
	Inherits: ^BuildingPlug
	Valued:
		Cost: 200
	Tooltip:
		Name: Power Turbine
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		Description: Provides extra power generation, place them on the smokestack of the structure.
		BuildPaletteOrder: 36
		Prerequisites: ~gacnst, gapowr, garadr, ~!global-upgrades, ~techlevel.4
	Plug:
		Type: powrup
	Power:
		Amount: 100

GAFIRE:
	Inherits: ^Building
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@SHAPE: ^3x2Shape
	Inherits@AIbuilding: ^AIbuildingMicroControl
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 41
		Description: Generates a firestorm barrier in a circle around the building.\n\nSpecial:\n- When activated it increases the durability of friendly units inside the barrier by 30%\n- Units trying to cross the firestorm will be killed no matter if friend or foe
		Prerequisites: ~gacnst, gatech, ~techlevel.5
		BuildDuration: 500
		BuildDurationModifier: 100
	Valued:
		Cost: 1000
	Tooltip:
		Name: Firestorm Generator
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	WithRangeCircle:
		Range: 12c0
		Type: FirestormGen
		Color: 8888FFCC
		BorderWidth: 0
		Width: 2
	GrantTimedConditionOnDeploy:
		DeployedCondition: FirestormGen
		CooldownTicks: 1500
		StartsFullyCharged: false
		DeployedTicks: 300
		PauseOnCondition: (empdisable || disabled) && !FirestormGen
	ProximityExternalCondition:
		Condition: FirestormWallCondition
		Range: 12c0
		AffectsParent: false
		RequiresCondition: FirestormGen && !Building-Buildup && !empdisable && !disabled
	FirestromSP:
		RequiresCondition: FirestormGen && !empdisable && !disabled
		FirestormEffectImage: explosion
		FirestormEffectSequences: firestormexplo, fsidle, firestormexplo1, fsidle, firestormexplo2, fsidle
		FirestormEffectPalette: apblue
		FirestormEffectRotationAngle: 6
		Damage: 200000
		DamageMaxRange: 12544
		DamageMinRange: 11904
		Versus:
			Infantry: 100
			Building: 100
			Defense: 100
			Heavy: 100
			Aircraft: 100
			Concrete: 100
			Boss: 10
		ValidTargets: Ground, Water, Air
		InvalidTargets: Building
		ValidRelationships: Neutral, Enemy
		DamageTypes: ExplosionDeath
		LaunchEffectSounds: firstrm1.aud
	Health:
		HP: 100000
	WithIdleOverlay@lights:
		RequiresCondition: !Building-Buildup
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: true
	WithIdleOverlay@lights-bright:
		RequiresCondition: !Building-Buildup
		Sequence: idle-lights-bright
		Palette: bright
	WithIdleOverlay@active:
		RequiresCondition: !Building-Buildup
		Sequence: idle-active
	WithIdleOverlay@firestormactived:
		Image: explosion
		Sequence: firestormactived
		Palette: apolbluealpha
		Offset: 80, 370, 0
		IsDecoration: true ## so this doesn't affect by cloak palette
		RequiresCondition: FirestormGen && !Building-Buildup && !empdisable && !disabled
	Power:
		Amount: -100
	#ProvidesPrerequisite@buildingname:
	RequiresBuildableArea:
		AreaTypes: building
	Armament@AIAimOnly:
		RequiresCondition: AIbuildingMicroControl && !FirestormGen && !empdisable && !disabled && !Building-Buildup
		Weapon: FirestormAIAimingDummyWeapon
	AttackOmni@AIAimOnly:
		RequiresCondition: AIbuildingMicroControl && !Building-Buildup && !empdisable && !disabled
		PauseOnCondition: empdisable
	AutoTarget@AIonly:
		RequiresCondition: AIbuildingMicroControl
		InitialStanceAI: Defend
		MinimumScanTimeInterval: 41
		MaximumScanTimeInterval: 50
		ScanRadius: 11 #PREF: save trait looks up and scan armaments
	AutoTargetPriority@AIonly:
		ValidRelationships: Enemy
		ValidTargets: Ground, Air, Water
		Priority: 2
	AutoDeployer@AI:
		RequiresCondition: AIbuildingMicroControl && !Building-Buildup && !empdisable && !disabled
		DeployChance: 100
		DeployTicks: 200
		UndeployTicks: 0
	-RevealOnFire:
	ActorStatValues:
		Armaments: None

GAPLUG:
	Inherits: ^Building
	Inherits@1: ^SuperWeapon
	Inherits@2: ^HasSuperSupportPower
	Inherits@SHAPE: ^2x3Shape
	Valued:
		Cost: 5000
	Tooltip:
		Name: Ion Cannon Control Center
	Buildable:
		Queue: Defense.Shared, Defense.GDI
		BuildPaletteOrder: 46
		Prerequisites: ~gacnst, gatech, !enoughgaplug, ~techlevel.6
		Description: Communication facility for the Ion Cannon Array.\n\nSpecial:\n- Provides access to the Ion Cannon Array\n- Requires power to operate
		BuildDuration: 1250
		BuildDurationModifier: 100
	Building:
		Footprint: xxx xxx
		Dimensions: 2,3
	WithIdleOverlay@DISH:
		Sequence: idle-dish
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup
		Sequence: idle-lights-bright
		Palette: bright
	WithIdleOverlay@STRIP:
		Sequence: idle-strip
		RequiresCondition: !Building-Buildup
	NukePower:
		Prerequisites:
			1: gaplug
		Icons:
			1: ioncannon
		Names:
			1: Ion Cannon Array
		CircleRanges:
			1: 6c0
		Descriptions:
			1: Fires an array of ion cannons on the targetted area.
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		ChargeInterval: 6000
		MissileWeapons:
			1: IonCannonSpawner
		OrderName: IonCannon2
		Cursor: ioncannon
	SupportPowerChargeBar:
	WithIdleOverlay@ioncannona:
		RequiresCondition: !Building-Buildup
		Sequence: idle-ioncannona
	WithIdleOverlay@hunterseekerb:
		RequiresCondition: !Building-Buildup
		Sequence: idle-hunterseekerb
		Palette: player-nobright
		IsPlayerPalette: true
	WithIdleOverlay@hunterseekerb-bright:
		RequiresCondition: !Building-Buildup
		Sequence: idle-hunterseekerb-bright
		Palette: bright
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughgaplug
	Health:
		HP: 200000
	RequiresBuildableArea:
		AreaTypes: building
	IsometricSelectable:
		DecorationHeight: 48

NASTLH:
	Inherits: ^Building
	Inherits@IMPSGEN: ^AffectedByImprovedStealthGenerator
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@SHAPE: ^3x2Shape
	Inherits@AIbuilding: ^AIbuildingMicroControl
	Valued:
		Cost: 1000
	Tooltip:
		Name: Stealth Generator
	Buildable:
		Queue: Defense.Shared, Defense.Nod
		BuildPaletteOrder: 43
		Prerequisites: ~nodyard, natech, ~techlevel.5, ~!AINASTLHBuildLimit
		Description: Support structure that cloaks friendly units and buildings.\n\nSpecial:\n- Cloaks friendly assets around it\n- Generator itself is not cloaked\n- Requires power to operate
		BuildDuration: 500
		BuildDurationModifier: 100
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	Health:
		HP: 60000
	Armor:
		Type: Building
	WithIdleOverlay@pulse:
		Sequence: pulse
		RequiresCondition: !Building-Buildup && !disabled
	WithRangeCircle:
		Range: 12c0
		Type: cloakgenerator
		Color: 00FF7FCC
		BorderWidth: 0
		Width: 2
	ProximityExternalCondition:
		Condition: cloakgenerator
		Range: 12c0
		EnableSound: cloak5.aud
		DisableSound: cloak5.aud
		AffectsParent: false
		RequiresCondition: !disabled && !Building-Buildup && !empdisable
	WithIdleOverlay@cloakgeneratoreff:
		Sequence: cloakgeneratorwaveBig
		RequiresCondition: !disabled && !Building-Buildup && !empdisable
		Image: explosion
		Palette: effectalpha10
		IsDecoration: true ## so this doesn't affect by cloak palette
	Cloak@CLOAKGENERATOR:
		RequiresCondition: improvedsgen && !disabled && !Building-Buildup && !empdisable
	-ExternalCondition@CLOAKGENERATOR:
	-ExternalCondition@crate-cloak:
	SmokeParticleEmitter@spawnsmoke:
		RequiresCondition: HeavyDamaged && (!improvedsgen || (improvedsgen && (disabled || Building-Buildup || empdisable)))
	ExplodeWeapon@spawnsparks:
		RequiresCondition: HeavyDamaged && (!improvedsgen || (improvedsgen && (disabled || Building-Buildup || empdisable)))
	WithIdleOverlay@SpawnFire:
		RequiresCondition: HeavyDamaged && (!improvedsgen || (improvedsgen && (disabled || Building-Buildup || empdisable)))
	Power:
		Amount: -100
	RequiresBuildableArea:
		AreaTypes: building
	ProvidesPrerequisite@AIBuildLimit:
		RequiresCondition: AIbuildingMicroControl
		Prerequisite: AINASTLHBuildLimit

NATMPL:
	Inherits: ^Building
	Inherits@1: ^SuperWeapon
	Inherits@2: ^HasMisslePower
	Inherits@SHAPE: ^3x3Shape
	Buildable:
		Queue: Defense.Shared, Defense.Nod
		BuildPaletteOrder: 47
		Prerequisites: ~nodyard, natech, !enoughnatmpl, ~techlevel.6
		Description: The religious center of the Brotherhood of Nod.\n\nSpecial:\n- Provides access to the Apocalypse Missile\n- Requires power to operate
		BuildDuration: 1250
		BuildDurationModifier: 100
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughnatmpl
	Valued:
		Cost: 5000
	HitShape:
		Type: Rectangle
			TopLeft: -2000, -2000
			BottomRight: 2000, 2000
	Tooltip:
		Name: Temple of Nod
	Building:
		Footprint: xxxx xxxx xxxx
		Dimensions: 4,3
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-lights-bright
		Palette: bright
	Health:
		HP: 200000
	RequiresBuildableArea:
		AreaTypes: building
		Adjacent: 3
	WithSupportPowerActivationAnimation:
	Targetable:
		TargetTypes: Building, Ground, C4, DetonateAttack, ConsideredThreatForAI
	IsometricSelectable:
		DecorationHeight: 60
	NukePower:
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		CircleRanges:
			1: 10c0
		MissileWeapons:
			1: ApocalypseMissileExplosion
		Descriptions:
			1: Launches a liquid-tiberium warhead at a target location.\n\nSpecial:\n- Instant kills ground units and aircraft
		Names:
			1: Apocalypse Missile
		MissileImage: apocalypsemissile
		OrderName: ApocalypseMissile
		TrailImage: explosion
		TrailPalette: gensmkexplogreen
		TrailSequences: jsmokey3
		TrailDelay: 0
		TrailInterval: 0
		Icons:
			1: nodtibnukeicon
		BeaconPosters:
			1: nodtibnukeiconmini
		SpawnOffset: -1200, 1400, 0
	WithSupportPowerActivationAnimation:
		Palette: player
		IsPlayerPalette: True
		RequiresCondition: !Building-Buildup

MUVENTI:
	Inherits: ^Building
	Inherits@RENDER: ^MutRenderBuilding
	Inherits@SHAPE: ^2x2Shape
	Inherits@AIbuilding: ^AIbuildingMicroControl
	Buildable:
		Queue: Defense.Shared, Defense.Mutant
		BuildPaletteOrder: 38
		Description: Allows mutants to quickly transport their units across the battlefield.\n\nSpecial:\n- Transports units between tunnels (except Epics and Demotrucks)\n- Cannot be repaired by engineers
		Prerequisites: ~mutyard, muradr, ~techlevel.4
		BuildDuration: 125
		BuildDurationModifier: 100
	ProductionCostMultiplier@AI: ## AI cannot use it well
		Multiplier: 10
		Prerequisites: AIOnly
	Valued:
		Cost: 500
	Tooltip:
		Name: Tunnel Network
	Building:
		Footprint: xx xx
		Dimensions: 2,2
		BuildSounds: ssneakat.wav
	Health:
		HP: 50000
	-InstantlyRepairable:
	SharedCargo:
		Types: Infantry, Vehicle
		BeforeUnloadDelay: 0
		AfterUnloadDelay: 0
	Targetable:
		TargetTypes: Building, Ground, C4
	ProvidesPrerequisite@buildingname:
	RequiresBuildableArea:
		AreaTypes: building
	#Exit@1:
	#	Facing: 640
	#	SpawnOffset: 256,256,0
	#	ExitCell: 2,1
	RallyPoint:
		Palette: mouse
		IsPlayerPalette: false
	MapEditorData:
		Categories: Defence
	WithIdleOverlay@SpawnFire:
		Sequence: fire2_higher
	RenderSprites:
		Image: musnek
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithSharedCargoPipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		Margin: 8, 2
		FullSequence: pip-green-building
		EmptySequence: pip-empty-building
		PipStride: 4, 2
		Palette: pips
		ValidRelationships: Ally, Neutral, Enemy
		CustomPipSequences:
			red: pip-red-building
			green: pip-green-building
			yellow: pip-yellow-building
			blue: pip-blue-building
			gray: pip-gray-building
	Armament@AIAimOnly:
		RequiresCondition: AIbuildingMicroControl && !Building-Buildup && !StopAndDeploy
		Weapon: MutTunnelAIAimingDummyWeapon
		ReloadingCondition: StopAndDeploy ## HACK: SharedCargo can only deploy when not firing
	AttackOmni@AIAimOnly:
		RequiresCondition: AIbuildingMicroControl && !Building-Buildup && !StopAndDeploy
	AutoTarget@AIonly:
		RequiresCondition: AIbuildingMicroControl && !StopAndDeploy
		InitialStanceAI: Defend
		MinimumScanTimeInterval: 30
		MaximumScanTimeInterval: 30
		ScanRadius: 10 #PREF: save trait looks up and scan armaments
	AutoTargetPriority@AIonly:
		ValidRelationships: Enemy
		ValidTargets: Ground, Air, Water
		Priority: 2
	AutoDeployer@AI:
		RequiresCondition: AIbuildingMicroControl
		DeployTrigger: Attack
		DeployChance: 100
		DeployTicks: 30
		UndeployTicks: 5
	-RevealOnFire:
	-GivesBuildableArea:
	-GrantConditionOnPrerequisite@SUDDENDEATH:
	-MustBeDestroyed:
	ActorStatValues:
		Armaments: None
		Upgrades: upgrade.tunnel_repairs

MUTSW1:
	Inherits: ^Building
	Inherits@1: ^SuperWeapon
	Inherits@2: ^HasSuperSupportPower
	Inherits@RENDER: ^MutRenderBuilding
	Inherits@SHAPE: ^3x2Shape
	Buildable:
		Queue: Defense.Shared, Defense.Mutant
		BuildPaletteOrder: 48
		Prerequisites: ~mutyard, muhall, !enoughmutsw1, ~techlevel.6
		Description: Generates powerful Ion Storms.\n\nSpecial:\n- Provides access to the Ion Storm\n- Requires power to operate
		BuildDuration: 1250
		BuildDurationModifier: 100
	Valued:
		Cost: 5000
	Tooltip:
		Name: Meditation Hall
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughmutsw1
	NukePower:
		Prerequisites:
			1: mutsw1
		MissileWeapons:
			1: IonStormSpawnerWeapon
		Icons:
			1: ionstorm
		ChargeInterval: 7500
		CircleRanges:
			1: 9c0
		OrderName: IonStorm
		Names:
			1: Ion Storm
		Descriptions:
			1: Allows the player to generate Ion Storms.\n\nSpecial:\n- Instant kills ground units and aircraft.
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		CameraRange: 10c0
		CameraSpawnAdvance: 25
		CameraRemoveDelay: 300
		FlightDelay: 75
		FlightVelocity: 1c0
		DisplayBeacon: true
		BeaconPosters:
			1: miniionstromicon
		BeaconRemoveAdvance: 0
	Health:
		HP: 200000
	RequiresBuildableArea:
		AreaTypes: building
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup
		Sequence: idle-dec
		Palette: playermut
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !Building-Buildup && !disabled
		Sequence: idle-dec-lights
		Palette: playermut
	WithSupportPowerActivationOverlay@LIGHTS:
		RequiresCondition: !Building-Buildup
		Sequence: idle-dec-lights-active
		Palette: playermut
		IsPlayerPalette: True
	WithSupportPowerActivationExplodeWeapon:
		Weapon: MutSWLightningCharge
		LocalOffset: 1800,-1000,1000

SCREXTRACTOR:
	Inherits: ^Building
	Inherits@1: ^ScrinDeathExplo
	Inherits@2: ^ScrinDefenceFire
	Inherits@CLOAKEFFECT: ^WithTriggerCloakEffect-Defence
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@RENDER: ^ScrinRenderBuilding
	Valued:
		Cost: 1000
	Tooltip:
		Name: Shield Generator
	Buildable:
		Queue: Defense.Shared, Defense.Scrin
		BuildPaletteOrder: 29
		Description: Scrin support structure shielding their troops.\n\nSpecial:\n- Generates shields around nearby friendly ground vehicles\n- Shields provide additional 150 health points\n- Does not protect against super weapons\n- Requires power to operate
		Prerequisites: ~drached, scrradr, ~techlevel.4
		BuildDuration: 500
		BuildDurationModifier: 100
	Building:
		Footprint: x
		Dimensions: 1,1
	Health:
		HP: 40000
	Power:
		Amount: -50
	ProximityExternalCondition@VanguardShield:
		Condition: VanguardShield
		Range: 8c0
		AffectsParent: false
		RequiresCondition: !disabled && !Building-Buildup && !empdisable
	WithRangeCircle:
		Range: 8c0
		Type: VanguardShield
		Color: 8A2BE2CC
		BorderWidth: 0
		Width: 2
	RequiresBuildableArea:
		AreaTypes: building
	ProvidesPrerequisite@buildingname:
	WithIdleOverlay@shieldpower:
		RequiresCondition: !disabled && !Building-Buildup && !empdisable
		Sequence: idle
		Image: shieldpower
		Palette: scrinenergystuffsalpha
		Offset: 0, 0, 1800
		IsDecoration: true ## so this doesn't affect by cloak palette
	ThrowsShrapnel@SMALL:
		Weapons: SmallDebrisScrin
	ThrowsShrapnel@LARGE:
		Weapons: LargeDebrisScrin

SCRSW1:
	Inherits: ^Building
	Inherits@1: ^ScrinDeathExplo
	Inherits@2: ^ScrinBuildingFire
	Inherits@3: ^SuperWeapon
	Inherits@4: ^HasSuperSupportPower
	Inherits@RENDER: ^ScrinRenderBuilding
	Inherits@SHAPE: ^3x2Shape
	Buildable:
		Queue: Defense.Shared, Defense.Scrin
		BuildPaletteOrder: 51
		Prerequisites: ~drached, scrtech, !enoughscrsw1, ~techlevel.6
		Description: Allows the Scrin to call a meteor strike.\n\nSpecial:\n- Provides access to the Wrath of the Creator\n- Requires power to operate
		BuildDuration: 1250
		BuildDurationModifier: 100
	Valued:
		Cost: 5000
	Tooltip:
		Name: Meteor Tractor
	Building:
		Footprint: xxx xxx
		Dimensions: 3,2
	NukePower:
		Cursor: emp
		Icons:
			1: meteor
		ChargeInterval: 6000
		Names:
			1: Wrath of the Creator
		Descriptions:
			1: Drags meteors from orbit dealing moderate damage over a wide area.\n\nSpecial:\n- Instant kills ground units and aircraft.
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		Prerequisites:
			1: scrsw1
		MissileWeapons:
			1: MeteorSpawner
		CircleRanges:
			1: 6c0
		OrderName: MeteorSpawner
		FlightDelay: 30
		FlightVelocity: 1c0
		CameraRange: 10c0
		CameraSpawnAdvance: 0 ## need to be earlier than hit time
		CameraRemoveDelay: 350
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughscrsw1
	Health:
		HP: 200000
	RequiresBuildableArea:
		AreaTypes: building
	IsometricSelectable:
		DecorationHeight: 48
	ThrowsShrapnel@SMALL:
		Weapons: SmallDebrisScrin
	ThrowsShrapnel@LARGE:
		Weapons: LargeDebrisScrin
	WithSupportPowerActivationExplodeWeapon:
		Weapon: MeteorDragLazer
		LocalOffset: 120,140,3200 #1200, 1400, 0 #700,0,4900
		HitOffset: 4500,4750,15000

CABEYE:
	Inherits: ^Building
	Inherits@LOWPOWER: ^DisableOnLowPowerOrPowerDown
	Inherits@RENDER: ^CabRenderBuilding
	Inherits@SHAPE: ^2x2Shape
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		BuildPaletteOrder: 39
		Description: High tech detection system.\n\nSpecial:\n- Provides huge vision range\n- Shrouds the enemy vision range in a certain area\n- Requires power to operate
		Prerequisites: ~cabyard, cabradr, ~techlevel.4
		BuildDuration: 250
		BuildDurationModifier: 100
	Valued:
		Cost: 500
	Tooltip:
		Name: Eye of C.A.B.A.L.
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	WithSpriteBody:
		PauseOnCondition: empdisable || disabled
	Health:
		HP: 75000
	WithRangeCircle:
		Range: 12c0
		Type: cabeye
		Color: A52A2ACC
		BorderWidth: 0
		Width: 2
	CreatesShroud:
		Range: 11c0
		RequiresCondition: !disabled && !empdisable
	RevealsShroud@asd:
		Range: 18c0
		RequiresCondition: !disabled && !empdisable
	Power:
		Amount: -50
	Targetable:
		TargetTypes: Building, Ground, C4
	ProvidesPrerequisite@buildingname:
	RequiresBuildableArea:
		AreaTypes: building
	IsometricSelectable:
		DecorationHeight: 96

CABSW1:
	Inherits: ^Defence
	Inherits@1: ^SuperWeapon
	Inherits@4: ^WithTriggerCloakEffect-Building
	Inherits@RENDER: ^CabRenderBuilding
	Inherits@SHAPE: ^3x3Shape
	Valued:
		Cost: 5000
	Tooltip:
		Name: Iron Savior
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		Prerequisites: ~cabyard, cabtech, !enoughcabsw1, ~techlevel.6
		Description: Energy cannon based off Scrin technology.\n\nSpecial:\n- Provides access to the Iron Savior\n- Requires power to operate
		BuildPaletteOrder: 49
		BuildDuration: 1250
		BuildDurationModifier: 100
	Building:
		Footprint: xxx xxx xxx
		Dimensions: 3,3
	BodyOrientation:
		QuantizedFacings: 32
	Armor:
		Type: Building
	Turreted:
		TurnSpeed: 8
		InitialFacing: 368
		RealignDelay: -1
	AttackTurreted:
	WithSpriteTurret:
		Recoils: false
		RequiresCondition: !Building-Buildup
	Armament@trueweapon:
		Weapon: IronSavior
		LocalOffset: 1300,0,2300
		CasingWeapon: IronSaviorMuzzle
		CasingSpawnLocalOffset: 1300,0,2300
		CasingTargetOffset: 1300,0,2300
		Name: superweapon
	ProvidesPrerequisite@buildingname:
	ProvidesPrerequisite@swlimit:
		Prerequisite: enoughcabsw1
	FireArmamentPower:
		AllowMultiple: true
		Cursor: emp
		Icons:
			1: cabcannon
		TargetCircleRange: 6c0
		ChargeInterval: 7500
		Names:
			1: Iron Savior
		Descriptions:
			1: Fires a volley of energy volleys at the target location.\n\nSpecial:\n- Instant kills ground units and aircraft
		EndChargeSound: SuperWeaponReady
		EndChargeSpeechNotification: SuperWeaponReady
		EndChargeTextNotification: Commander, our superweapon is online.
		SelectTargetSpeechNotification: SelectTarget
		SelectTargetTextNotification: Select target.
		Prerequisites:
			1: cabsw1
		OrderName: IronSavior
		LaunchSpeechNotification: SuperweaponFired
		IncomingSpeechNotification: SuperweaponFired
		IncomingSound: SuperweaponFired
		LaunchTextNotification: Warning: A superweapon has been launched.
		IncomingTextNotification: Warning: A superweapon has been launched.
		LaunchSound: n_swlaunch.aud
		DisplayTimerRelationships: Ally, Neutral, Enemy
		PauseOnCondition: empdisable || disabled
		CameraRange: 10c0
		CameraSpawnAdvance: 25
		CameraRemoveDelay: 350
	Health:
		HP: 200000
	RequiresBuildableArea:
		AreaTypes: building
	SpawnActorsOnSell@gdi:
		ValuePercent: 30
		ActorTypes: gdie1
		Factions: gdi
	SpawnActorsOnSell@nod:
		ValuePercent: 30
		ActorTypes: altnode1
		Factions: nod
	SpawnActorsOnSell@cab:
		ValuePercent: 30
		ActorTypes: worker
		Factions: cab
	SpawnActorsOnSell@mut:
		ValuePercent: 30
		ActorTypes: marauder
		Factions: mut
	SpawnActorsOnSell@scr:
		ValuePercent: 30
		ActorTypes: shark
		Factions: scr
	IsometricSelectable:
		DecorationHeight: 36

MUMINE:
	Inherits: ^NonBuildingStaticActor
	Tooltip:
		Name: Mine
	Health:
		HP: 5000
	GivesExperience:
		Experience: 10
	Targetable:
		TargetTypes: Ground, Mine
	BodyOrientation:
		QuantizedFacings: 1
	Cloak@cloakgenerator-self:
		InitialDelay: 1
		CloakDelay: 50
		Palette: cloakmut
		IsPlayerPalette: true
		UncloakOn: None
	WithMakeAnimation:
		Condition: minelayer-diging
	ExplodeWeapon: ## HACK: this will make minelayer play animation 
		Weapon: AnimateMinelayer-lay
		RequiresCondition: minelayer-diging
	Mine:
		CrushClasses: minetrigger
		DetonateClasses: minetrigger
		AvoidFriendly: true
		BlockFriendly: false
	Explodes:
		Weapon: MineTrigger
	MapEditorData:
		Categories: Defence

BLACKDEFD:
	Inherits: ^Defence
	Inherits@4: ^WithTriggerCloakEffect-Building
	Inherits@AUTOTARGET: ^AutoTargetGround
	Inherits@COMMANDO: ^CommandoIcon
	Inherits@EXPERIENCE: ^GainsExperience
	Inherits@RENDER: ^CabRenderBuilding
	Inherits@SHAPE: ^2x3Shape
	Inherits@VISION: ^8CellVision
	Inherits@AIbuilding: ^AIbuildingMicroControl
	Valued:
		Cost: 5000
	Health:
		HP: 300000
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -1536
			BottomRight: 512, 1536
	HitShape@2:
		UseTargetableCellsOffsets: true
		Type: Rectangle
			LocalYaw: -128
			TopLeft: 512, 512
			BottomRight: 1536, 1536
	Buildable:
		Queue: Defense.Shared, Defense.CABAL
		Prerequisites: ~cabyard, cabobelisk, ~techlevel.6, !DarkDefenderExists
		Description: C.A.B.A.L.'s ultimate weapon. Defense structure with\n long range plasma artillery. Can transform into\nthe mobile Epic walker version.\n\nGood vs: Ground targets\n\nSpecial when deployed:\n- Armed with a plasma artillery launcher\n- Maximum Supply of 1\n\nSpecial when mobile:\n- Selfhealing up to 100%\n- Can shoot over walls\n- Can crush everything except other Epics\n- Immune to mind control\n- Build limit: 1
		BuildPaletteOrder: 50
		BuildLimit: 1
		BuildDuration: 1500
		BuildDurationModifier: 100
	Building:
		Footprint: xx_ xx_ xxx
		Dimensions: 3,3
	Armor:
		Type: Building
	RevealsShroud:
		Type: Footprint
		MaxHeightDelta: 3
	WithMakeAnimation:
		Condition: Building-Buildup
	WithSpriteBody:
		PauseOnCondition: empdisable
	GrantConditionAfterDelay:
		Condition: CanDeploy
		PauseOnCondition: empdisable
		Delay: 750
	Transforms:
		RequiresCondition: CanDeploy
		IntoActor: bcoredef
		Offset: 1, 1
		Facing: 384
		TransformSounds: coreup1.aud
		NoTransformSounds:
	Tooltip:
		Name: C.A.B.A.L. Defender
	Targetable:
		TargetTypes: Building, Ground, C4, DetonateAttack
	RequiresBuildableArea:
		AreaTypes: building
	-Sellable:
	IsometricSelectable:
		Class: blackdefd
		DecorationHeight: 36
	AttackOmni:
		PauseOnCondition: empdisable
	AutoTarget:
		ScanRadius: 19 #PREF: save trait looks up and scan armaments
	Armament@final:
		Weapon: BlackCDefArtillery
		LocalOffset: 0, -256, 2048
		ReloadingCondition: charging
		PauseOnCondition: Building-Buildup
	WithIdleOverlay@Charged:
		Image: hugegreenplasma
		Sequence: idle
		Offset: 0, -256, 2048
		RequiresCondition: !Building-Buildup && !charging && !empdisable
		Palette: apgreen
		IsDecoration: true ## so this doesn't affect by cloak palette
	WithIdleOverlay@Charging:
		Image: greenplasma2
		Sequence: idle
		Offset: 0, -256, 2048
		RequiresCondition: !Building-Buildup && charging && !empdisable
		Palette: jascgreen
		IsDecoration: true ## so this doesn't affect by cloak palette
	WithDecoration@CommandoIcon:
		Position: Top
	WithDecoration@rank-veteran:
		Position: Bottom
	WithDecoration@rank-elite:
		Position: Bottom
	WithDecoration@rank-heroic:
		Position: Bottom
	ProvidesPrerequisite@buildinglimit:
		Prerequisite: DarkDefenderExists
	Voiced:
		VoiceSet: CoreDefender
		Volume: 0.75
	VoiceAnnouncement:
		Voice: Build
	RenderSprites:
		Image: blackdefd
	### AI Control
	AutoDeployer@AI:
		RequiresCondition: AIbuildingMicroControl
		DeployTrigger: Periodically
		DeployTicks: 1005
		UndeployTicks: 30
	-Targetable@MC:
	-WithColoredOverlay@IDISABLE:
	-GrantConditionOnPowerState@LOWPOWER:
	-GrantCondition@IDISABLE:
	-ToggleConditionOnOrder:
	-WithDecoration@POWERDOWN:
	-PowerMultiplier@POWERDOWN:
	-MapEditorData:
	ActorStatValues:
		Damage: 450

BLACKDEFD2:
	Inherits: BLACKDEFD
	-Buildable:
	-VoiceAnnouncement:
	MapEditorData:
		Categories: Defence
